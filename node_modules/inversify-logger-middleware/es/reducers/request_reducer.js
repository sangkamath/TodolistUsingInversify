import bindingReducer from "./binding_reducer";
import targetReducer from "./target_reducer";
function requestReducer(request, options) {
    var reducedRequest = {};
    var requestOptions = options;
    if (requestOptions.serviceIdentifier === true) {
        reducedRequest.serviceIdentifier = request.serviceIdentifier;
    }
    // bindings
    if (requestOptions.bindings !== undefined) {
        var reducedBindings = request.bindings.map(function (binding) {
            return bindingReducer(binding, options.bindings);
        });
        reducedRequest.bindings = reducedBindings;
    }
    // target
    if (requestOptions.target !== undefined && request.target !== null) {
        reducedRequest.target = targetReducer(request.target, options.target);
    }
    // child requests
    var reducedChieldRequest = request.childRequests.map(function (childRequest) {
        return requestReducer(childRequest, options);
    });
    reducedRequest.childRequests = reducedChieldRequest;
    return reducedRequest;
}
export default requestReducer;
