"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var binding_reducer_1 = require("./binding_reducer");
var target_reducer_1 = require("./target_reducer");
function requestReducer(request, options) {
    var reducedRequest = {};
    var requestOptions = options;
    if (requestOptions.serviceIdentifier === true) {
        reducedRequest.serviceIdentifier = request.serviceIdentifier;
    }
    // bindings
    if (requestOptions.bindings !== undefined) {
        var reducedBindings = request.bindings.map(function (binding) {
            return binding_reducer_1.default(binding, options.bindings);
        });
        reducedRequest.bindings = reducedBindings;
    }
    // target
    if (requestOptions.target !== undefined && request.target !== null) {
        reducedRequest.target = target_reducer_1.default(request.target, options.target);
    }
    // child requests
    var reducedChieldRequest = request.childRequests.map(function (childRequest) {
        return requestReducer(childRequest, options);
    });
    reducedRequest.childRequests = reducedChieldRequest;
    return reducedRequest;
}
exports.default = requestReducer;
