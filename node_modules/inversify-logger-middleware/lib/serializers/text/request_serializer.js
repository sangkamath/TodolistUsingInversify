"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var inversify_1 = require("inversify");
var text_serializer_utils_1 = require("./text_serializer_utils");
var binding_serializer_1 = require("./binding_serializer");
var target_serializer_1 = require("./target_serializer");
function serializeRequest(textEntry, depth, index, request) {
    var indentation = text_serializer_utils_1.getIndentationForDepth(depth);
    var propertyLogger = text_serializer_utils_1.makePropertyLogger(indentation);
    textEntry = propertyLogger(textEntry, 0, "Request", index.toString());
    if (request !== null) {
        if (request.serviceIdentifier !== undefined) {
            textEntry = propertyLogger(textEntry, 1, "serviceIdentifier", inversify_1.getServiceIdentifierAsString(request.serviceIdentifier));
        }
        // bindings
        if (request.bindings !== undefined && Array.isArray(request.bindings)) {
            textEntry = propertyLogger(textEntry, 1, "bindings");
            request.bindings.forEach(function (binding, bindingIndex) {
                textEntry = propertyLogger(textEntry, 2, "Binding<" + inversify_1.getServiceIdentifierAsString(request.serviceIdentifier) + ">", bindingIndex.toString());
                textEntry = binding_serializer_1.default(textEntry, depth, binding);
            });
        }
        // target
        textEntry = target_serializer_1.default(textEntry, depth, request.target);
        // child requests
        if (request.childRequests !== undefined && Array.isArray(request.childRequests) && request.childRequests.length > 0) {
            textEntry = propertyLogger(textEntry, 1, "childRequests");
            request.childRequests.forEach(function (childRequest, childIndex) {
                textEntry = serializeRequest(textEntry, (depth + 2), childIndex, childRequest);
            });
        }
    }
    return textEntry;
}
exports.default = serializeRequest;
